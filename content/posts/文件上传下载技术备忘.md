---
title: "文件上传下载技术备忘"
date: 2021-10-26T14:50:11+08:00
draft: true
tags: [上传, 下载]
categories: [Java]da
---



### Tips for header

注意在HttpServletResponse写文件流之前设置所有header，因为写输出流之后，文件实质上已经在发送了，header自然也早已经发出去了。

设置下载文件的MIME类型。

```http
Content-Type: application/octet-stream
```

下载文件没有名称，添加Content-Disposition

```http
Content-Disposition: attachment;filename=xxx.xlsx
```

对于不分片的单文件传输，Transfer-Encoding和Content-Length二选一，考虑Content-Length的计算成本以及算错的风险，还是默认自动添加的Transfer-Encoding更好点。

```http
Transfer-Encoding: chunked
```

