---
title: "文件上传下载方案"
date: 2021-10-26T14:49:23+08:00
tags: [上传, 下载]
categories: [方案, Java]
---

文件上传下载系统的演进方案

第〇层：小文件/图片
最快方案：直接base64编码当作字符串。仅限小文件！整个文件要加载内存转字符串，注意内存限制。

第一层：简单的文件上传下载
上传：服务端multipart接受文件
客户端单次上传一个文件或多个文件
下载：
客户端用a标签下载：FTP存储/tomcat静态文件/nginx静态文件

第二层：可续传的文件上传
上传：用HTTP1.1的特性，可中断续传，需要后端额外识别range，追加文件保存
下载：依然是a标签

第三层：分片+可续传的文件上传
分片意味着可以处理大文件，同时缓解文件服务器的内存压力
前端将文件分片，多连接加速上传；
下载：如果分片文件合并，可以直接下载。如果直接分片状态保存，考虑不再使用浏览器的下载工具，前端也分片下载，在客户端合并。

第四层：分布式文件系统
利用分布式的文件系统方案，突破内存和IO瓶颈
